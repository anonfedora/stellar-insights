#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit security checks..."

# Run npm audit
echo "ğŸ“¦ Checking for security vulnerabilities..."
cd frontend
if ! npm audit --audit-level=high; then
    echo "âŒ Security vulnerabilities detected!"
    echo "Run 'npm audit fix' to resolve issues"
    exit 1
fi

echo "âœ… No high-severity vulnerabilities found"

# Run linting
echo "ğŸ” Running ESLint..."
if ! npm run lint; then
    echo "âŒ Linting failed!"
    exit 1
fi

echo "âœ… All pre-commit checks passed!"
